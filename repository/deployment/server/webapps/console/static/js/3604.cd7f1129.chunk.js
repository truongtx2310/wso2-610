"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3604],{13604:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(45688),o=n(8206),i=n(41671),l=n(79133),c=n(13654),r=n(38314),s=n(52983),u=n(26221),p=n(69141),d=n(14152),m=n(30762),f=n(83739),v=n(92423),h=n(82954),g=n(61621),y=n(19709),S=n(1430),A=n(15774),E=n(38530),T=n(10765),I=n(53756),b=n(61375);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(r){c=!0,o=r}finally{try{l||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=[{key:1,text:l.I18n.instance.t("common:name"),value:"name"},{key:2,text:l.I18n.instance.t("common:type"),value:"type"},{key:3,text:l.I18n.instance.t("common:createdOn"),value:"createdDate"},{key:4,text:l.I18n.instance.t("common:lastUpdatedOn"),value:"lastUpdated"}],_=function(e){var t,n=e["data-testid"],l=(0,u.$)().t,P=(0,c.fQ)().getLink,_=(0,p.I0)(),k=(0,p.v9)((function(e){return e.config.ui.features})),L=C((0,s.useState)(""),2),x=L[0],R=L[1],M=C((0,s.useState)(O[0]),2),w=M[0],U=M[1],N=C((0,s.useState)(0),2),Z=N[0],D=N[1],$=C((0,s.useState)(y.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),Q=$[0],z=$[1],V=C((0,s.useState)(!1),2),F=V[0],j=V[1],G=C((0,s.useState)(!1),2),B=G[0],W=G[1],Y=(0,p.v9)((function(e){return e.config})),H=(0,p.v9)((function(e){var t,n,a;return null==e||null===(t=e.config)||void 0===t||null===(n=t.deployment)||void 0===n||null===(a=n.accountApp)||void 0===a?void 0:a.tenantQualifiedPath})),q=C((0,s.useState)(y.$x.DEFAULT_MY_ACCOUNT_STATUS),2),J=q[0],K=q[1],X=(0,A.B)(),ee=y.lD.getInstance(),te=(0,E.Ok)("advancedConfigurations,templateId,clientId,issuer",Q,Z,x),ne=te.data,ae=te.isLoading,oe=te.error,ie=te.mutate,le=window.AppUtils.getConfig().organizationName,ce=(0,E.pv)(!le),re=ce.data,se=ce.isLoading,ue=ce.error;(0,s.useEffect)((function(){if(!1===ae&&!1===se){var e=y.$x.DEFAULT_MY_ACCOUNT_STATUS;if(re){var t=re.value;t&&"false"===t&&(e=!1)}K(e)}}),[ae,se]),(0,s.useEffect)((function(){oe&&(oe.response&&oe.response.data&&oe.response.data.description?_((0,i.V_)({description:oe.response.data.description,level:o.QU.ERROR,message:l("console:develop.features.applications.notifications.fetchApplications.error.message")})):_((0,i.V_)({description:l("console:develop.features.applications.notifications.fetchApplications.genericError.description"),level:o.QU.ERROR,message:l("console:develop.features.applications.notifications.fetchApplications.genericError.message")})))}),[oe]),(0,s.useEffect)((function(){if(ue)if(ue.response&&ue.response.data&&ue.response.data.description){var e;if(404===ue.response.status)return;_((0,i.V_)({description:null!==(e=ue.response.data.description)&&void 0!==e?e:l("console:develop.features.applications.myaccount.fetchMyAccountStatus.error.description"),level:o.QU.ERROR,message:l("console:develop.features.applications.myaccount.fetchMyAccountStatus.error.message")}))}else _((0,i.V_)({description:l("console:develop.features.applications.myaccount.fetchMyAccountStatus.genericError.description"),level:o.QU.ERROR,message:l("console:develop.features.applications.myaccount.fetchMyAccountStatus.genericError.message")}))}),[ue]);var pe,de=function(e){R(e),D(0)};return s.createElement(c.Xg,{pageTitle:"Applications",action:s.createElement(a.di,{when:a.TA.APPLICATION_WRITE},s.createElement(c.KM,{onClick:function(){ee.publish("application-click-new-application-button"),y.m8.push(y.$x.getPaths().get("APPLICATION_TEMPLATES"))},"data-testid":"".concat(n,"-list-layout-add-button")},s.createElement(v.Z,{name:"add"}),l("console:develop.features.applications.list.actions.add"))),title:l("console:develop.pages.applications.title"),description:s.createElement("p",null,l("console:develop.pages.applications.subTitle"),s.createElement(c.eb,{link:P("develop.applications.learnMore")},l("common:learnMore"))),contentTopMargin:y.$x.getTenant()===y.$x.getSuperTenant(),"data-testid":"".concat(n,"-page-layout")},X!==S.$B.SUBORGANIZATION&&(y.$x.getTenant()!==y.$x.getSuperTenant()&&g.applicationConfig.advancedConfigurations.showMyAccount?s.createElement(c.pJ,{className:"mt-0 mb-5","data-componentid":"application-consumer-account-link"},s.createElement(d.Z,null,s.createElement(d.Z.Item,null,s.createElement(m.Z,{verticalAlign:"middle"},s.createElement(m.Z.Column,{floated:"left",mobile:16,computer:9},s.createElement(c.dn,{icon:(0,y.s_)().myAccountSolidIcon,className:"mt-1",floated:"left",size:"tiny",spaced:"right",verticalAlign:"middle",inline:!0,square:!0,transparent:!0}),s.createElement(d.Z.Header,{"data-componentid":"application-consumer-account-link-title",className:"my-account-title mb-1"},l("console:develop.features.applications.myaccount.title"),s.createElement(f.Z,{size:"tiny",className:"preview-label ml-2"},l("common:preview")),s.createElement(v.Z,{color:J?"green":"grey",name:J?"check circle":"minus circle",className:"middle aligned ml-1"})),s.createElement(d.Z.Description,{"data-componentid":"application-consumer-account-link-description"},l("console:develop.features.applications.myaccount.description"),s.createElement(c.eb,{link:P("develop.applications.myaccount.learnMore")},l("common:learnMore")))),J||le?s.createElement(c.GI,{trigger:s.createElement(m.Z.Column,{mobile:16,computer:6,className:"pr-0"},s.createElement(c.OR,{value:H,"data-componentid":"application-consumer-account-link-copy-field"})),content:l("console:develop.features.applications.myaccount.popup"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null,s.createElement(m.Z.Column,{mobile:16,computer:1},!le&&s.createElement(c.GI,{trigger:s.createElement(h.Z,{icon:"setting",onClick:function(){y.m8.push({pathname:y.$x.getPaths().get("MY_ACCOUNT_EDIT"),state:I.jo.APPLICATION_STATE})}}),content:l("common:settings"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))))):null),s.createElement(c.PS,{advancedSearch:s.createElement(y.nC,{onFilter:de,filterAttributeOptions:[{key:0,text:l("common:name"),value:"name"},{key:1,text:l("common:clientId"),value:"clientId"},{key:2,text:l("common:issuer"),value:"issuer"}],filterAttributePlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:l("console:develop.features.applications.advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:F,"data-testid":"".concat(n,"-list-advanced-search")}),currentListSize:null==ne?void 0:ne.count,isLoading:ae,listItemLimit:Q,onItemsPerPageDropdownChange:function(e,t){z(t.value)},onPageChange:function(e,t){D((t.activePage-1)*Q)},onSortStrategyChange:function(e,t){U((0,r.Z)(O,(function(e){return t.value===e.value})))},showPagination:!0,showTopActionPanel:ae||!(!x&&(null==ne?void 0:ne.totalResults)<=0),sortOptions:O,sortStrategy:w,totalPages:Math.ceil((null==ne?void 0:ne.totalResults)/Q),totalListSize:null==ne?void 0:ne.totalResults,paginationOptions:{disableNextButton:(pe=ne,!((null==pe?void 0:pe.startIndex)+(null==pe?void 0:pe.count)!==(null==pe?void 0:pe.totalResults)+1))},"data-testid":"".concat(n,"-list-layout")},s.createElement(T.dA,{advancedSearch:s.createElement(y.nC,{onFilter:de,filterAttributeOptions:[{key:0,text:l("common:name"),value:"name"},{key:1,text:l("common:clientId"),value:"clientId"},{key:2,text:l("common:issuer"),value:"issuer"}],filterAttributePlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:l("console:develop.features.applications.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:l("console:develop.features.applications.advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:F,"data-testid":"".concat(n,"-list-advanced-search")}),featureConfig:k,isLoading:ae,list:ne,onApplicationDelete:function(){ie()},onEmptyListPlaceholderActionClick:function(){y.m8.push(y.$x.getPaths().get("APPLICATION_TEMPLATES"))},onSearchQueryClear:function(){R(""),j(!F)},searchQuery:x,"data-testid":"".concat(n,"-list"),"data-componentid":"application"})),B&&s.createElement(T.y7,{title:null==b?void 0:b.name,subTitle:null==b?void 0:b.description,closeWizard:function(){return W(!1)},template:b,showHelpPanel:!0,subTemplates:null==b?void 0:b.subTemplates,subTemplatesSectionTitle:null==b?void 0:b.subTemplatesSectionTitle,addProtocol:!1,templateLoadingStrategy:null!==(t=Y.ui.applicationTemplateLoadingStrategy)&&void 0!==t?t:I.jo.DEFAULT_APP_TEMPLATE_LOADING_STRATEGY}))};_.defaultProps={"data-testid":"applications"};const k=_}}]);