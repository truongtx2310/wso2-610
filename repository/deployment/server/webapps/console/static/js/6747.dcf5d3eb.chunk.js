/*! For license information please see 6747.dcf5d3eb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6747],{46747:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var i=n(17189),o=n(8206),r=n(41671),a=n(13654),l=n(46440),c=n(17),s=n(67127),u=n(52983),p=n(26221),d=n(69141),f=n(83739),h=n(87951),g=n(19709),m=n(37618),v=n(23367),E=n(38530),y=n(10765),S=n(12735),A=n(39345),b=n(39073),O=n(37376),L=n(91778),C=n(39795),I=n(53756);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var w,R=["applicationId","subOrganizationList","sharedOrganizationList","clientId","onClose","onApplicationSharingCompleted","isSharedWithAll","data-componentid"];function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},P.apply(this,arguments)}function T(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){N=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof p?t:p,r=Object.create(o.prototype),a=new O(i||[]);return r._invoke=function(e,t,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return C()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=s(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),r}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var u={};function p(){}function d(){}function f(){}var h={};l(h,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==t&&n.call(m,o)&&(h=m);var v=f.prototype=p.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function i(o,r,a,l){var c=s(e[o],e,r);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==_(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){i("next",e,a,l)}),(function(e){i("throw",e,a,l)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,l)}))}l(c.arg)}var o;this._invoke=function(e,n){function r(){return new t((function(t,o){i(e,n,t,o)}))}return o=o?o.then(r,r):r()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=s(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=f,l(v,"constructor",f),l(f,"constructor",d),d.displayName=l(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},E(y.prototype),l(y.prototype,r,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new y(c(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(v),l(v,a,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=L,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;b(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function x(e,t,n,i,o,r,a){try{var l=e[r](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(i,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){x(r,i,o,a,l,"next",e)}function l(e){x(r,i,o,a,l,"throw",e)}a(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return r}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function D(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}!function(e){e[e.SHARE_ALL=0]="SHARE_ALL",e[e.SHARE_SELECTED=1]="SHARE_SELECTED",e[e.UNSHARE=2]="UNSHARE"}(w||(w={}));var H=function(e){var t=e.applicationId,n=e.subOrganizationList,i=e.sharedOrganizationList,l=e.clientId,c=e.onClose,f=e.onApplicationSharingCompleted,h=e.isSharedWithAll,m=e["data-componentid"],E=D(e,R),y=(0,d.I0)(),_=(0,p.$)().t,x=(0,d.v9)((function(e){return e.organization.organization})),z=k((0,u.useState)([]),2),j=z[0],H=z[1],M=k((0,u.useState)([]),2),Z=M[0],V=M[1],Q=k((0,u.useState)(w.SHARE_SELECTED),2),W=Q[0],F=Q[1],G=g.lD.getInstance();(0,u.useEffect)((function(){h===I.Tf.TRUE?F(w.SHARE_ALL):i&&0!==(null==i?void 0:i.length)||h!==I.Tf.FALSE?F(w.SHARE_SELECTED):F(w.UNSHARE)}),[h,i]),(0,u.useEffect)((function(){return H(n||[])}),[n]),(0,u.useEffect)((function(){return V(i||[])}),[i]);var Y=(0,u.useCallback)(U(N().mark((function e(){var n,a,s,u;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W!==w.SHARE_ALL){e.next=4;break}n={shareWithAllChildren:!0},e.next=14;break;case 4:if(W!==w.SHARE_SELECTED){e.next=14;break}if(h!==I.Tf.TRUE){e.next=11;break}return s=Z.map((function(e){return e.id})),e.next=9,(0,v.An)(t,x.id);case 9:e.next=13;break;case 11:s=(0,S.Z)(Z,i,"id").map((function(e){return e.id})),a=(0,S.Z)(i,Z,"id");case 13:n={shareWithAllChildren:!1,sharedOrganizations:s};case 14:W===w.SHARE_ALL||W===w.SHARE_SELECTED?((0,v.Bn)(x.id,t,n).then((function(e){c(null,null),y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.description"),level:o.QU.SUCCESS,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.message")})),G.publish("application-share",{"client-id":l})})).catch((function(e){c(null,null),e.response.data.message?y((0,r.V_)({description:e.response.data.message,level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})):y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.description"),level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})),G.publish("application-share-error",{"client-id":l})})).finally((function(){return f()})),null===(u=a)||void 0===u||u.forEach((function(e){(0,v.NY)(x.id,t,e.id).then((function(t){c(null,null),y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.success.description",{organization:e.name}),level:o.QU.SUCCESS,message:_("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.success.message")})),G.publish("application-share",{"client-id":l})})).catch((function(t){c(null,null),t.response.data.message?y((0,r.V_)({description:t.response.data.message,level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.message")})):y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.description",{organization:e.name}),level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.stopSharingNotification.genericError.message")})),G.publish("application-share-error",{"client-id":l})}))}))):W===w.UNSHARE&&(0,v.An)(t,x.id).then((function(){c(null,null),y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.description"),level:o.QU.SUCCESS,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.success.message")})),G.publish("application-share",{"client-id":l})})).catch((function(e){c(null,null),e.response.data.message?y((0,r.V_)({description:e.response.data.message,level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})):y((0,r.V_)({description:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.description"),level:o.QU.ERROR,message:_("console:develop.features.applications.edit.sections.shareApplication.addSharingNotification.genericError.message")})),G.publish("application-share-error",{"client-id":l})})).finally((function(){return f()}));case 15:case"end":return e.stop()}}),e)}))),[i,Z,v.NY,y,x.id,t,c,W]),$=(0,u.useCallback)((function(){Z.length!==n.length?V(n):V([])}),[n,H,Z]);return u.createElement(b.Z,P({closeOnDimmerClick:!0,dimmer:"blurring",size:"tiny",closeOnDocumentClick:!0,closeOnEscape:!0,"data-testid":"".concat(m,"-share-application-modal")},E),u.createElement(b.Z.Header,null,_("console:develop.features.applications.edit.sections.shareApplication.heading")),u.createElement(b.Z.Content,null,u.createElement(O.Z,{basic:!0},u.createElement(L.Z,{label:_("console:manage.features.organizations.shareWithSelectedOrgsRadio"),onChange:function(){return F(w.SHARE_SELECTED)},checked:W===w.SHARE_SELECTED,"data-componentid":"".concat(m,"-share-with-all-checkbox")}),u.createElement(a.IX,{disabled:W!==w.SHARE_SELECTED,selectionComponent:!0,searchPlaceholder:_("console:manage.features.transferList.searchPlaceholder",{type:"organizations"}),handleUnelectedListSearch:function(e,t){var i=t.value,o=[];if((0,s.Z)(i))H(n);else{var r=new RegExp((0,A.Z)(i),"i");n&&n.map((function(e){r.test(e.name)&&o.push(e)})),H(o)}},"data-componentId":"application-share-modal-organization-transfer-component",className:"share-app-modal"},u.createElement(a.Jv,{disabled:W!==w.SHARE_SELECTED,isListEmpty:!((null==j?void 0:j.length)>0),handleHeaderCheckboxChange:$,isHeaderCheckboxChecked:(null==Z?void 0:Z.length)===(null==n?void 0:n.length),listType:"unselected",listHeaders:[_("console:manage.features.transferList.list.headers.1"),""],emptyPlaceholderContent:_("console:manage.features.transferList.list.emptyPlaceholders.groups.unselected",{type:"organizations"}),"data-testid":"application-share-modal-organization-transfer-component-all-items",emptyPlaceholderDefaultContent:_("console:manage.features.transferList.list.emptyPlaceholders.default")},null==j?void 0:j.map((function(e,t){var n=null==e?void 0:e.name,i=-1!==Z.findIndex((function(t){return t.id===e.id}));return u.createElement(a.qT,{disabled:W!==w.SHARE_SELECTED,handleItemChange:function(){return function(e){var t=T(Z),n=t.findIndex((function(t){return t.id===e.id}));-1!==n?(t.splice(n,1),V(t)):(t.push(e),V(t))}(e)},key:t,listItem:n,listItemId:e.id,listItemIndex:t,isItemChecked:i,showSecondaryActions:!1,"data-testid":"application-share-modal-organization-transfer-component -unselected-organizations"})})))),u.createElement(C.Z,{hidden:!0}),u.createElement(L.Z,{label:_("console:manage.features.organizations.shareApplicationRadio"),onChange:function(){return F(w.SHARE_ALL)},checked:W===w.SHARE_ALL,"data-componentid":"".concat(m,"-share-with-all-checkbox")}),u.createElement(a.kW,null,_("console:manage.features.organizations.shareApplicationInfo")),u.createElement(C.Z,{hidden:!0}),u.createElement(L.Z,{label:_("console:manage.features.organizations.unshareApplicationRadio"),onChange:function(){return F(w.UNSHARE)},checked:W===w.UNSHARE,"data-componentid":"".concat(m,"-share-with-all-checkbox")}),u.createElement(a.kW,null,_("console:manage.features.organizations.unshareApplicationInfo")))),u.createElement(b.Z.Actions,null,u.createElement(a.Qj,{onClick:function(){return c(null,null)}},_("common:cancel")),u.createElement(a.KM,{disabled:!Z,onClick:function(){Y()},"data-testid":"".concat(m,"-save-button")},_("console:develop.features.applications.edit.sections.shareApplication.shareApplication"))))};H.defaultProps={"data-componentid":"application-share-modal"};var M=n(61375),Z=n(17680),V=n(5241);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=function(e){var t,n,S,A,b,O,L,C,_,w=e.location,R=e["data-testid"],P=new URLSearchParams(w.search),T=(0,p.$)().t,N=(0,d.I0)(),x=(0,u.useRef)(null),U=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),k=(0,d.v9)((function(e){return e.helpPanel.docStructure})),z=(0,d.v9)((function(e){return e.application.templates})),j=(0,d.v9)((function(e){return e.config.ui.features})),D=(0,d.v9)((function(e){return e.auth.tenantDomain})),F=(0,d.v9)((function(e){return e.organization.organization})),G=W((0,u.useState)(Z.M7),2),Y=G[0],$=G[1],X=W((0,u.useState)(void 0),2),B=X[0],K=X[1],q=W((0,u.useState)(void 0),2),J=q[0],ee=q[1],te=W((0,u.useState)(void 0),2),ne=(te[0],te[1]),ie=W((0,u.useState)(void 0),2),oe=ie[0],re=ie[1],ae=W((0,u.useState)(!1),2),le=ae[0],ce=ae[1],se=W((0,u.useState)(!1),2),ue=se[0],pe=se[1],de=W((0,u.useState)([]),2),fe=de[0],he=de[1],ge=W((0,u.useState)([]),2),me=ge[0],ve=ge[1],Ee=W((0,u.useState)(I.Tf.UNDEFINED),2),ye=Ee[0],Se=Ee[1],Ae=(0,d.v9)((function(e){return e.organization.isFirstLevelOrganization})),be=W((0,u.useState)(!1),2),Oe=be[0],Le=be[1],Ce=W((0,u.useState)(),2),Ie=Ce[0],_e=Ce[1],we=W((0,u.useState)(),2),Re=we[0],Pe=we[1];(0,u.useEffect)((function(){if(x||J){var e=x.current;e&&e.offsetWidth<e.scrollWidth&&ce(!0)}}),[x,J]);(0,u.useEffect)((function(){var e,t,n,i,o=null===(e=g.m8.location.pathname)||void 0===e?void 0:e.split("/"),r=o[(null==o?void 0:o.length)-1];i=g.Wj.getUserPreferences(),(0,s.Z)(i)||null!==(t=i.identityAppsSettings)&&void 0!==t&&null!==(n=t.devPortal)&&void 0!==n&&n.isApplicationHelpShown||(N((0,g.rq)(!0)),function(){var e,t=g.Wj.getUserPreferences();if(!(0,s.Z)(t)&&null!=t&&null!==(e=t.identityAppsSettings)&&void 0!==e&&e.devPortal){var n=(0,l.Z)(t);n.identityAppsSettings.devPortal.isApplicationHelpShown=!0,g.Wj.setUserPreferences(n)}}()),Ue(r)}),[]),(0,u.useEffect)((function(){if("object"===Q(g.m8.location.state)){Le(!0);var e=g.m8.location.state;_e(e.id),Pe(e.name)}})),(0,u.useEffect)((function(){Y&&z&&z instanceof Array&&z.length>0?xe():V.e7.getApplicationTemplates().finally()}),[z,Y]),(0,u.useEffect)((function(){var e,t;null!=Y&&Y.templateId||(null===(e=Y.inboundProtocols)||void 0===e?void 0:e.length)>0&&(Y.templateId=null!==(t=y.Eg.get(Y.inboundProtocols[0].type))&&void 0!==t?t:I.jo.CUSTOM_APPLICATION_OIDC,xe())}),[J,Y]),(0,u.useEffect)((function(){j&&j.applications&&((0,i.cr)(j.applications,I.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))||g.m8.push(g.$x.getPaths().get("PAGE_NOT_FOUND")))}),[j]),(0,u.useEffect)((function(){var e;if(B){var t=(0,c.Z)(k,I.jo.EDIT_APPLICATIONS_DOCS_KEY);t&&N((0,g.dv)(null===(e=t[I.jo.APPLICATION_TEMPLATE_DOC_MAPPING.get(B.id)])||void 0===e?void 0:e[I.jo.APPLICATION_DOCS_OVERVIEW]))}}),[B,k]),(0,u.useEffect)((function(){ue&&isOrganizationManagementEnabled&&((0,v.jX)(null,null,null,null,!0,!1).then((function(e){he(e.organizations)})).catch((function(e){null!=e&&e.description?N((0,r.V_)({description:e.description,level:o.QU.ERROR,message:T("console:manage.features.organizations.notifications.getOrganizationList.error.message")})):N((0,r.V_)({description:T("console:manage.features.organizations.notifications.getOrganizationList.genericError.description"),level:o.QU.ERROR,message:T("console:manage.features.organizations.notifications.getOrganizationList.genericError.message")}))})),(0,v.DM)(F.id,Y.id).then((function(e){ve(e.data.organizations)})).catch((function(e){e.response.data.description?N((0,r.V_)({description:e.response.data.description,level:o.QU.ERROR,message:T("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.message")})):N((0,r.V_)({description:T("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:o.QU.ERROR,message:T("console:develop.features.applications.edit.sections.shareApplication.getSharedOrganizations.genericError.message")}))})))}),[v.jX,ue]);var Te,Ne,xe=function(){var e=z.find((function(e){return e.id===Y.templateId}));Y.templateId!==I.jo.CUSTOM_APPLICATION_OIDC&&Y.templateId!==I.jo.CUSTOM_APPLICATION_SAML&&Y.templateId!==I.jo.CUSTOM_APPLICATION_PASSIVE_STS||(e=z.find((function(e){return e.id===M.id}))),K(e)},Ue=function(e){ee(!0),(0,E.sl)(e).then((function(e){var t,n;$(e);var i=null==e||null===(t=e.advancedConfigurations)||void 0===t||null===(n=t.additionalSpProperties)||void 0===n?void 0:n.filter((function(e){return"shareWithAllChildren"===(null==e?void 0:e.name)}));i&&0!==i.length?Se(JSON.parse(i[0].value)?I.Tf.TRUE:I.Tf.FALSE):Se(I.Tf.UNDEFINED)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?N((0,r.V_)({description:e.response.data.description,level:o.QU.ERROR,message:T("console:develop.features.applications.notifications.fetchApplication.error.message")})):N((0,r.V_)({description:T("console:develop.features.applications.notifications.fetchApplication.genericError.description"),level:o.QU.ERROR,message:T("console:develop.features.applications.notifications.fetchApplication.genericError.message")}))})).finally((function(){ee(!1)}))},ke=(0,u.useCallback)((function(){Ue(Y.id)}),[Ue,Y]);return u.createElement(a.O9,{pageTitle:"Edit Application",title:u.createElement(u.Fragment,null,u.createElement("span",null,Y.name)),contentTopMargin:!0,description:null!==(t=h.applicationConfig.editApplication.getOverriddenDescription(null==oe||null===(n=oe.oidc)||void 0===n?void 0:n.clientId,D,null==B?void 0:B.name))&&void 0!==t?t:u.createElement("div",{className:"with-label ellipsis",ref:x},(null==B?void 0:B.name)&&u.createElement(f.Z,{size:"small"},B.name),u.createElement(a.GI,{disabled:!le,content:null==Y?void 0:Y.description,trigger:u.createElement("span",null,null==Y?void 0:Y.description)})),image:null!==(S=h.applicationConfig.editApplication.getOverriddenImage(null==oe||null===(A=oe.oidc)||void 0===A?void 0:A.clientId,D))&&void 0!==S?S:Y.imageUrl?u.createElement(a.JT,{name:Y.name,image:Y.imageUrl,size:"tiny"}):u.createElement(a.Xo,{name:Y.name,size:"tiny",floated:"left"}),loadingStateOptions:{count:5,imageType:"square"},isLoading:J,backButton:{"data-testid":"".concat(R,"-page-back-button"),onClick:function(){Oe?g.m8.push({pathname:g.$x.getPaths().get("IDP_EDIT").replace(":id",Ie),state:m.s0.CONNECTED_APPS_TAB_ID}):g.m8.push(g.$x.getPaths().get("APPLICATIONS"))},text:Oe?T("console:develop.features.idp.connectedApps.applicationEdit.back",{idpName:Re}):T("console:develop.pages.applicationsEdit.backButton")},titleTextAlign:"left",bottomMargin:!1,pageHeaderMaxWidth:!0,"data-testid":"".concat(R,"-page-layout"),truncateContent:!0,action:u.createElement(u.Fragment,null,h.applicationConfig.editApplication.getActions(null==oe||null===(b=oe.oidc)||void 0===b?void 0:b.clientId,D,R),isOrganizationManagementEnabled&&h.applicationConfig.editApplication.showApplicationShare&&!(null!==(O=Y.advancedConfigurations)&&void 0!==O&&O.fragment)&&Y.access===Z.Ch.WRITE&&(Ae||window.AppUtils.getConfig().organizationName)&&(0,i.Xr)(null==j?void 0:j.applications,null==j||null===(L=j.applications)||void 0===L||null===(C=L.scopes)||void 0===C?void 0:C.update,U)&&u.createElement(a.KM,{onClick:function(){return pe(!0)}},T("console:develop.features.applications.edit.sections.shareApplication.shareApplication")))},u.createElement(y.Qm,{application:Y,featureConfig:j,isLoading:J,setIsLoading:ee,onDelete:function(){g.m8.push(g.$x.getPaths().get("APPLICATIONS"))},onUpdate:function(e){Ue(e)},template:B,"data-testid":R,urlSearchParams:P,getConfiguredInboundProtocolsList:function(e){ne(e)},getConfiguredInboundProtocolConfigs:function(e){re(e)},readOnly:"true"===P.get(I.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY)||Y.access===Z.Ch.READ||!(0,i.Xr)(null==j?void 0:j.applications,null==j||null===(Te=j.applications)||void 0===Te||null===(Ne=Te.scopes)||void 0===Ne?void 0:Ne.update,U)}),ue&&Y&&u.createElement(H,{open:ue,applicationId:Y.id,clientId:null==oe||null===(_=oe.oidc)||void 0===_?void 0:_.clientId,subOrganizationList:fe,sharedOrganizationList:me,onClose:function(){return pe(!1)},onApplicationSharingCompleted:ke,isSharedWithAll:ye}))};G.defaultProps={"data-testid":"application-edit"};const Y=G}}]);