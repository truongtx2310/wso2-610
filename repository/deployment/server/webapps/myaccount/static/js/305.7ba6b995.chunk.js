"use strict";(self.webpackChunk_wso2is_myaccount=self.webpackChunk_wso2is_myaccount||[]).push([[305],{16305:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var l=t(70429),r=t(17189),o=t(41718),i=t(52983),u=t(26221),c=t(51820),a=t(91119),s=t(32003),d=t(74677),f=t(57555),v=t(41665),E=t(52580),m=t(80389),C=t(76399);function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var l,r,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(l=t.next()).done)&&(o.push(l.value),!n||o.length!==n);i=!0);}catch(c){u=!0,r=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw r}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}var A=function(e){var n,t,I,A,R,T,p,S,h,g,b,w,_=e.enableNonLocalCredentialUserView,N=(0,u.$)().t,O=(0,c.I0)(),U=(0,c.v9)((function(e){return e.authenticationInformation})),F=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.features})),Y=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.disableMFAforSuperTenantUser})),$=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.disableMFAForFederatedUsers})),D=(0,c.v9)((function(e){var n;return null==e||null===(n=e.authenticationInformation)||void 0===n?void 0:n.scope})),Z=(0,c.v9)((function(e){return e.authenticationInformation.profileInfo.isReadOnly})),x=y((0,i.useState)(!1),2),V=x[0],k=x[1],L=y((0,i.useState)(null),2),X=L[0],M=L[1],P=(0,i.useRef)(null),j=(0,i.useRef)(null),G=(0,i.useRef)(null);(0,i.useEffect)((function(){setTimeout((function(){switch(e.location.hash){case"#".concat(d.F$.CONSENTS_CONTROL):P.current.scrollIntoView({behavior:"smooth",block:"center"});break;case"#".concat(d.F$.ACCOUNT_ACTIVITY):G.current.scrollIntoView({behavior:"smooth",block:"center"});break;case"#".concat(d.F$.ACCOUNT_SECURITY):j.current.scrollIntoView({behavior:"smooth",block:"center"})}}),100)}),[e.location]),(0,i.useEffect)((function(){var e,n;if(_){var t=null==U||null===(e=U.profileInfo)||void 0===e||null===(n=e[v.k.scim.customEnterpriseSchema])||void 0===n?void 0:n[null===l.Cb||void 0===l.Cb?void 0:l.Cb.SCIM2_SCHEMA_DICTIONARY.get("LOCAL_CREDENTIAL_EXISTS")];t&&"false"==t&&k(!0)}}),[null==U?void 0:U.profileInfo]),(0,i.useEffect)((function(){var e;if(null!=U&&null!==(e=U.profileInfo)&&void 0!==e&&e.userName){var n=(0,E.tF)(U.profileInfo.userName);M(n)}}),[null==U?void 0:U.profileInfo]);var H=function(e){O((0,m.V_)(e))},W=function(){return d.$x.getTenant()===d.$x.getSuperTenant()};return i.createElement(o.Xg,{pageTitle:"Security",title:N("myAccount:pages.security.title"),description:V?"Secure your account by managing your sessions":N("myAccount:pages.security.subTitle")},i.createElement(a.Z,null,!C.DN.isProfileReadOnly(Z)&&!V&&(0,r.Xr)(null==F?void 0:F.security,null==F||null===(n=F.security)||void 0===n||null===(t=n.scopes)||void 0===t?void 0:t.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_CHANGE_PASSWORD"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.GR,{onAlertFired:H}))):null,!C.DN.isProfileReadOnly(Z)&&!V&&(0,r.Xr)(null==F?void 0:F.security,null==F||null===(I=F.security)||void 0===I||null===(A=I.scopes)||void 0===A?void 0:A.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_ACCOUNT_RECOVERY"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",{ref:j},i.createElement(s.Rx,{featureConfig:F,onAlertFired:H})))):null,!(0,r.Xr)(null==F?void 0:F.security,null==F||null===(R=F.security)||void 0===R||null===(T=R.scopes)||void 0===T?void 0:T.read,D)||(!V||$&&W())&&V||!(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_MFA"))||Y&&W()?null:i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.P$,{featureConfig:F,onAlertFired:H,userStore:X}))),(0,r.Xr)(null==F?void 0:F.security,null==F||null===(p=F.security)||void 0===p||null===(S=p.scopes)||void 0===S?void 0:S.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_LOGIN_VERIFY_DATA"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement(s.wD,{featureConfig:F,onAlertFired:H}))):null,(0,r.Xr)(null==F?void 0:F.security,null==F||null===(h=F.security)||void 0===h||null===(g=h.scopes)||void 0===g?void 0:g.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_ACTIVE_SESSIONS"))?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",{ref:G},i.createElement(s.E4,{onAlertFired:H})))):null,(0,r.Xr)(null==F?void 0:F.security,null==F||null===(b=F.security)||void 0===b||null===(w=b.scopes)||void 0===w?void 0:w.read,D)&&(0,r.cr)(null==F?void 0:F.security,d.$x.FEATURE_DICTIONARY.get("SECURITY_CONSENTS"))&&f.xg.utils.isManageConsentAllowedForUser(X)?i.createElement(a.Z.Row,null,i.createElement(a.Z.Column,{width:16},i.createElement("div",null,i.createElement(s.pj,{onAlertFired:H})),i.createElement("div",{ref:P}))):null))};A.defaultProps={enableNonLocalCredentialUserView:f.xg.nonLocalCredentialUser.enableNonLocalCredentialUserView};const R=A}}]);